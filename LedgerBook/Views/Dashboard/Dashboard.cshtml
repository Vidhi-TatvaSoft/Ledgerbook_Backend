@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    ViewData["Title"] = "Dashboard";
}

<div class="dashboard-class">
    <div class="fs-2 fw-bold text-color ms-4 mt-3">Dashboard</div>

    <div class="row gx-4 col-12 pe-1 ms-1">

        <div class="col-12 col-md-6 col-lg-4  mt-2 p-2 ">
            <div class="shadow rounded p-2 h-100 dashboard-total-sales dashboard-card">
                <div class="d-flex justify-content-between align-items-center w-100 p-2">
                    <div class="d-flex align-items-center">
                        <div class="p-2 d-flex justify-content-center align-items-center dashboard-icon-outer rounded-circle"
                            style="border: 1px solid #126773">
                            <div class="dashboard-icon d-flex justify-content-center align-items-center">
                                <i class="fa-solid fa-user text-color fs-4"></i>
                            </div>
                        </div>
                        <div class="fs-4 fw-bold ms-2">Customers</div>
                    </div>
                    <div class="fs-4"><span class="badge bg-color rounded-circle" id="dashboard-total-customer"></span>
                    </div>
                </div>
                <div class="d-flex justify-content-start ps-2" id="dashboad-customer-amount">
                </div>
            </div>
        </div>

        <div class="col-12 col-md-6 col-lg-4 mt-2 p-2 ">
            <div class="shadow rounded p-2 h-100 dashboard-total-sales dashboard-card">
                <div class="d-flex justify-content-between align-items-center w-100 p-2">
                    <div class="d-flex align-items-center">
                        <div class="p-2 d-flex justify-content-center align-items-center dashboard-icon-outer rounded-circle"
                            style="border: 1px solid #126773">
                            <div class="dashboard-icon d-flex justify-content-center align-items-center">
                                <i class="fa-solid fa-user text-color fs-4"></i>
                            </div>
                        </div>
                        <div class="fs-4 fw-bold ms-2">Suppliers</div>
                    </div>
                    <div class="fs-4"><span class="badge bg-color rounded-circle" id="dashboard-total-supplier"></span>
                    </div>
                </div>
                <div class="d-flex justify-content-start ps-2" id="dashboad-supplier-amount">
                </div>
            </div>
        </div>

        <div class="col-12 col-md-6 col-lg-4 mt-2 p-2 ">
            <div class="shadow rounded p-2 h-100 dashboard-total-sales dashboard-card">
                <div class="d-flex justify-content-between align-items-center w-100 p-2">
                    <div class="d-flex align-items-center">
                        <div class="p-2 d-flex justify-content-center align-items-center dashboard-icon-outer rounded-circle"
                            style="border: 1px solid #126773">
                            <div class="dashboard-icon d-flex justify-content-center align-items-center">
                                <i class="fa-solid fa-book text-color fs-4"></i>
                            </div>
                        </div>
                        <div class="fs-4 fw-bold ms-2">Net Balance</div>
                    </div>
                </div>
                <div class="d-flex justify-content-start ps-2" id="dashboard-netBalance-amount">
                </div>
            </div>
        </div>

        <div class="col-12 col-lg-8 mt-2 p-2 ">
            <div class="d-flex flex-column shadow rounded p-2 dashboard-card"
                style="min-height: calc(100vh - 585px); max-height: calc(100vh - 585px);">
                <div class="d-flex justify-content-between w-100">
                    <div class="fs-4 fw-bold">Party Revenue</div>
                    <div>
                        <select class="form-control" id="year-for-party-revenue" title="Select year">
                        </select>
                    </div>
                </div>

                <div id="ChartPartialView" style="min-height: calc(100vh - 630px); max-height: calc(100vh - 630px);">
                    <canvas id="ChartId"></canvas>
                </div>
            </div>
        </div>

        <div class="col-12 col-lg-4 mt-2 p-2 ">
            <div class="d-flex flex-column shadow rounded p-2 dashboard-card" style="min-height: calc(100vh - 585px);">
                <div class="fs-4 fw-bold">Top 5 Party</div>
                <div class="p-2 top-party-scroll" id="dashboard-topparty">
                </div>
            </div>
        </div>

        <div class="col-12 col-lg-6 mt-2 p-2 ">
            <div class="d-flex flex-column shadow rounded p-2 dashboard-card" style="min-height: calc(100vh - 723px);">
                <div class="fs-4 fw-bold">Recent Transactions</div>
                <div class="p-2" id="dashboard-recent-transaction">
                </div>
            </div>
        </div>

        <div class="col-12 col-lg-6 mt-2 p-2 ">
            <div class="shadow rounded p-2 dashboard-card" style="min-height: calc(100vh - 714px);">
                <div class="fs-4 fw-bold">Upcoming Due Date</div>
                <div class="p-2 upcoming-duedate-scroll" id="dashboard-duedate">
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        let partyRevenue = [];
        let backgroundColor = [];
        let borderColor = [];
        let Labels = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"]
        let yearForGraph;
        let years = [];

        $(document).ready(function () {
            toasterFromLocalstorage();
            getDashboardData();
            getYears();
            $(document).on("change", "#year-for-party-revenue", function () {
                backgroundColor = [];
                borderColor = [];
                partyRevenue = []
                yearForGraph = $("#year-for-party-revenue").val();
                getPartyrevenue(yearForGraph);
            })
        })
    </script>
}