@model string;
@{
    Layout = "~/Views/Shared/_PageLayout.cshtml";
    ViewData["Title"] = "Party Email Verification";
}

<input type="hidden" id="party-email-verificationcode" value="@Model">
<div class="container-fluid vw-100 vh-100 d-flex align-items-center justify-content-center row"
    style="background-color: #126773;">
    <div class="card col-12 col-md-6 ms-2 ms-md-0 h-50 shadow-lg rounded d-flex justify-content-center align-items-center"
        style="background-color: #ffffff;">
        <div class="row d-flex align-items-center col-12">
            <div class="col-12 d-flex justify-content-center align-items-center">
                <img src="~/images/logo.jpg" width="70px" alt="" class="rounded-circle">
                <span class="ms-2  fw-bold text-color" style="font-size: 35px;">Ledgerbook</span>
            </div>
            <div id="verify-email-message-id">
            </div>
        </div>
    </div>
</div>


@section Scripts {
    <script>

        function verifyPartyEmail() {
            let verificationCode = $("#party-email-verificationcode").val();
            let params = setParameter("/Party/VerifyPartyEmail", GET, {}, FORM_URL, { verificationCode: verificationCode }, verifyPartySuccess);
            console.log(params);
            ajaxCall(params);
        }

        function verifyPartySuccess(response) {
            let htmlContent = "";
            if (response.result != null) {
                if (response.result.isEmailVerified) {
                    htmlContent += `<div class="col-12 text-success d-flex justify-content-center text-center mt-5"
                                style="font-size: 30px;">
                                Email Verified Successfully
                            </div>
                            <div class="col-12 d-flex justify-content-center text-center text-color mt-5" style="font-size: 20px;">
                                you have been added to business ${response.result.businessName} as ${response.result.partyType}.
                            </div>`
                } else {
                    htmlContent += `<div class="col-12 text-danger text-center d-flex justify-content-center mt-5 fw-bold"
                                style="font-size: 50px;">
                                Email Verification Failed
                            </div>`
                }
            } else {
                htmlContent += `<div class="col-12 text-danger text-center d-flex justify-content-center mt-5 fw-bold"
                                style="font-size: 30px;">
                                Something went wrong. Please try again later.
                            </div>`
            }
            $("#verify-email-message-id").html(htmlContent);
        }

        $(document).ready(function () {
            verifyPartyEmail();
        })
    </script>
}